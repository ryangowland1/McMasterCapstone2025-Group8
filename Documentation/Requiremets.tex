\documentclass[12pt]{article}
\usepackage{geometry}
\usepackage{longtable}
\usepackage{booktabs}
\usepackage{hyperref}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{float}
\usepackage{array}
\usepackage{multirow}

\geometry{
    a4paper,
    left=25mm,
    right=25mm,
    top=20mm,
    bottom=20mm,
}

\title{System Requirements\\\vspace{0.5cm}
Parking Systems for Autonomous Cars}
\author{
    Group 8 \\
    Marko Buha, Quinn Gauder, Ryan Gowland,\\
    Beichen Huang, Mohammad Nasser
}
\date{November 10, 2024}

\begin{document}

\maketitle

\tableofcontents
\thispagestyle{empty}
\newpage
\section*{Revision History}
\addcontentsline{toc}{section}{Revision History}

\small % Reducing font size
\begin{longtable}{p{2.5cm}p{3.5cm}p{4cm}p{2.5cm}p{2.5cm}}
\toprule
\textbf{Date} & \textbf{Editors} & \textbf{Change} & \textbf{Status} & \textbf{Approved By} \\
\midrule
10/17/2024 & Marko Buha & Initial draft of variables & For Review & - \\
11/06/2024 & Marko Buha & Added Purpose and Scope & For Review & - \\
11/07/2024 & Marko Buha & Updated Constants & For Review & - \\
11/11/2024 & Quinn Gauder & Revised Constants & For Review & - \\
11/12/2024 & Beichen Huang, Ryan Gowland, \newline Mohammad Nasser & Added Functional Requirements and Hazards & For Review & - \\
... & & & & \\
\bottomrule
\end{longtable}
\normalsize % Restore normal font size

\newpage

\section{Purpose and Scope}

This document specifies the system requirements for developing an autonomous parking system using 1/10th scale cars as part of the Mini MacCity project, funded by McMaster University’s Centre for Software Certification. It outlines the functional, safety, and design requirements that the system must fulfill to ensure successful implementation and team alignment.

\section{Definitions}

\begin{itemize}
    \item \textbf{Parking Line}: A line that marks the boundary between parking spots.
    \item \textbf{Sensor Origin}: The position in the point cloud data generated by the LiDAR or camera that represents the position of the sensor.
    \item \textbf{Point Cloud}: A collection of data points in space produced by 3D scanners like LiDAR, representing the external surfaces of objects.
    \item \textbf{Obstacle}: Any object that may impede the vehicle's path, requiring detection and avoidance.
\end{itemize}

\section{Monitored and Controlled Variables}

\subsection{Monitored Variables (M)}

\small % Reduce font size for this section
\begin{longtable}{p{3.5cm}p{2.5cm}p{2.5cm}p{5cm}}
\toprule
\textbf{Name} & \textbf{Type} & \textbf{Unit} & \textbf{Description} \\
\midrule
\endhead
\textbf{Distance} & Continuous & Meters & Distance to objects detected by sensors (e.g., obstacles, lines) \\
\textbf{Vehicle Speed} ($v$) & Continuous & Meters/second & Current speed of the vehicle \\
\textbf{Vehicle Heading} ($\theta$) & Continuous & Degrees & Current orientation angle of the vehicle \\
\textbf{Obstacle Presence} & Boolean & N/A & Indicator if an obstacle is detected (True/False) \\
\textbf{Parking Spot Detected} & Boolean & N/A & Indicator if a parking spot is detected (True/False) \\
\textbf{Sensor Status} & Boolean & N/A & Health status of sensors (True = OK, False = Fault) \\
\bottomrule
\end{longtable}
\normalsize % Restore normal font size

\subsection{Controlled Variables (C)}

\small
\begin{longtable}{p{3.5cm}p{2.5cm}p{2.5cm}p{5cm}}
\toprule
\textbf{Name} & \textbf{Type} & \textbf{Unit} & \textbf{Description} \\
\midrule
\endhead
\textbf{Motor Speed Command} & Continuous & Meters/second & Commanded speed to vehicle's motors \\
\textbf{Steering Angle Command} & Continuous & Degrees & Commanded steering angle \\
\textbf{Brake Command} & Discrete \{On, Off\} & N/A & Command to engage/disengage brakes \\
\textbf{Warning Signal} & Discrete \{On, Off\} & N/A & Signal to alert operator of hazards or errors \\
\textbf{Indicator Lights} & Discrete \{On, Off\} & N/A & Signals for vehicle intention (e.g., turning) \\
\bottomrule
\end{longtable}
\normalsize

\section{Constants}


\small % Reduce font size
\begin{longtable}{p{3.5cm}p{2cm}p{2cm}p{2cm}p{4cm}}
\toprule
\textbf{Name} & \textbf{Unit} & \textbf{Nominal Value} & \textbf{Range} & \textbf{Description} \\
\midrule
\endhead
\textbf{Parking Spot Length} & Meters & 0.660 & 0.635--0.686 & Standard length of a parking spot \\
\textbf{Parking Spot Width} & Meters & 0.406 & 0.381--0.432 & Standard width of a parking spot \\
\textbf{Parking Line Width} & Meters & 0.0254 & N/A & Width of the parking lines (tape) \\
\textbf{Vehicle Width} & Meters & TBD & 0.330--0.381 & Width of the vehicle; exact value to be measured \\
\textbf{Vehicle Length} & Meters & TBD & 0.450--0.550 & Length of the vehicle; exact value to be measured \\
\textbf{Sensor Offset} & Meters(x, y) & TBD & (0, 0)--(0.250,0.150) & Position from sensor origin to vehicle center; x correlates to length and y correlates to width \\
\textbf{Max Vehicle Speed} & Meters/second & TBD & TBD & Maximum allowable speed for safety \\
\textbf{Min Turning Radius} & Meters & TBD & TBD & Minimum turning radius of the vehicle \\
\textbf{Detection Range} & Meters & TBD & TBD & Maximum effective range of sensors \\
\textbf{Safety Distance} & Meters & TBD & 0.050--0.300 & Minimum distance to maintain from obstacles; exact value to be measured \\
\bottomrule
\end{longtable}
\normalsize % Restore font size



\textit{Note: TBD (To Be Determined) values will be specified after measurement and calibration.}

\section{Functional Requirements}

\subsection*{FR1: Autonomous Parking}

\begin{itemize}
    \item \textbf{FR1.1}: The system shall detect available parking spots within the environment using sensor data.
    \item \textbf{FR1.2}: The system shall assess the suitability of detected parking spots based on dimensions and accessibility.
    \item \textbf{FR1.3}: Upon selecting a parking spot, the system shall compute an optimal path for parking maneuver without collisions.
    \item \textbf{FR1.4}: The system shall control motor speed and steering to execute parking within the parking spot boundaries.
    \item \textbf{FR1.5}: The vehicle shall park centered within the spot, with deviations not exceeding $\pm$1 inch from center lines.
\end{itemize}

\subsection*{FR2: Obstacle Detection and Avoidance}

\begin{itemize}
    \item \textbf{FR2.1}: The system shall continuously monitor for obstacles within the Detection Range.
    \item \textbf{FR2.2}: If an obstacle is detected within the Safety Distance, the system shall adjust its path to avoid the obstacle.
    \item \textbf{FR2.3}: If avoidance is not possible, the system shall stop the vehicle by engaging the Brake Command and activate the Warning Signal.
    \item \textbf{FR2.4}: The system shall resume operation only when the obstacle is no longer within the Safety Distance.
\end{itemize}

\subsection*{FR3: Vehicle Control}

\begin{itemize}
    \item \textbf{FR3.1}: The system shall ensure the Motor Speed does not exceed the Max Vehicle Speed at any time.
    \item \textbf{FR3.2}: The system shall maintain smooth acceleration and deceleration profiles to prevent abrupt movements.
    \item \textbf{FR3.3}: Steering Angle commands shall not exceed limits imposed by the Min Turning Radius.
\end{itemize}

\subsection*{FR4: Sensor and Actuator Management}

\begin{itemize}
    \item \textbf{FR4.1}: The system shall perform continuous diagnostics of sensors and actuators.
    \item \textbf{FR4.2}: In case of sensor failure (Sensor Status is False), the system shall safely bring the vehicle to a stop.
    \item \textbf{FR4.3}: Actuator statuses shall be monitored, and any detected failure shall trigger an immediate stop and Warning Signal activation.
\end{itemize}

\subsection*{FR5: Safety and Error Handling}

\begin{itemize}
    \item \textbf{FR5.1}: The system shall engage Brake Command and activate Warning Signal upon detection of any critical error.
    \item \textbf{FR5.2}: The system shall log all errors and events with timestamps for diagnostic purposes.
    \item \textbf{FR5.3}: The system shall have an emergency stop function accessible to users.
\end{itemize}

\subsection*{FR6: System Initialization and Shutdown}

\begin{itemize}
    \item \textbf{FR6.1}: Upon startup, the system shall perform a self-check of all components before commencing operation.
    \item \textbf{FR6.2}: If any component fails the self-check, the system shall not proceed and shall notify the operator via Warning Signal.
    \item \textbf{FR6.3}: The system shall ensure all controlled variables return to a safe state upon shutdown.
\end{itemize}

\section{Hazard Analysis}

\subsection{Identified Hazards}

\begin{enumerate}
    \item \textbf{H1}: Collision with obstacles or other vehicles.
    \item \textbf{H2}: Vehicle deviating from intended path or operational area.
    \item \textbf{H3}: Sensor failures leading to incorrect perception of environment.
    \item \textbf{H4}: Actuator failures causing loss of control (e.g., stuck throttle, unresponsive steering).
    \item \textbf{H5}: Software errors causing unintended behavior.
    \item \textbf{H6}: Environmental factors affecting sensor performance (e.g., lighting conditions).
\end{enumerate}

\subsection{Mitigation Strategies}

\textbf{For H1 (Collision)}:

\begin{itemize}
    \item Implement robust obstacle detection with redundancy.
    \item Define Safety Distance and enforce immediate stopping if breached.
    \item Regularly test sensors for proper operation.
\end{itemize}

\textbf{For H2 (Deviation from Path)}:

\begin{itemize}
    \item Utilize precise localization and mapping.
    \item Implement geofencing to keep the vehicle within operational boundaries.
    \item Continuously monitor Vehicle Heading and adjust as necessary.
\end{itemize}

\textbf{For H3 (Sensor Failures)}:

\begin{itemize}
    \item Implement sensor fusion to cross-validate data.
    \item Monitor Sensor Status and perform regular self-checks.
    \item In case of failure, transition to safe state and alert operator.
\end{itemize}

\textbf{For H4 (Actuator Failures)}:

\begin{itemize}
    \item Monitor actuator feedback for anomalies.
    \item Design fail-safe mechanisms (e.g., default to neutral position).
    \item Schedule regular maintenance checks.
\end{itemize}

\textbf{For H5 (Software Errors)}:

\begin{itemize}
    \item Follow rigorous development practices, including code reviews and testing.
    \item Implement exception handling and watchdog timers.
    \item Use formal verification methods where applicable.
\end{itemize}

\textbf{For H6 (Environmental Factors)}:

\begin{itemize}
    \item Calibrate sensors for different conditions.
    \item Use sensors less affected by environmental changes (e.g., radar instead of optical).
    \item Implement adaptive algorithms to adjust to sensor input variability.
\end{itemize}

\section{System Design}

\subsection{Overview}

The autonomous parking system comprises both hardware and software components that interact to achieve the desired functionality.

\subsubsection{Hardware Components (Rectangles)}

\begin{itemize}
    \item \textbf{Sensors}:
    \begin{itemize}
        \item \textbf{LiDAR}: For distance measurements and obstacle detection.
        \item \textbf{Cameras}: For visual detection of parking lines and obstacles.
        \item \textbf{Ultrasonic Sensors}: For short-range obstacle detection.
    \end{itemize}
    \item \textbf{Actuators}:
    \begin{itemize}
        \item \textbf{Motors}: Control vehicle movement.
        \item \textbf{Steering Mechanism}: Adjusts vehicle heading.
        \item \textbf{Braking System}: Engages/disengages brakes.
    \end{itemize}
    \item \textbf{Processing Unit}:
    \begin{itemize}
        \item \textbf{Microcontroller} (e.g., Raspberry Pi): Runs control algorithms and processes sensor data.
    \end{itemize}
\end{itemize}

\subsubsection{Software Components (Circles)}

\begin{itemize}
    \item \textbf{Control Algorithms}:
    \begin{itemize}
        \item \textbf{Path Planning}: Computes optimal paths for navigation and parking.
        \item \textbf{Motion Control}: Controls Motor Speed and Steering Angle based on planned path.
    \end{itemize}
    \item \textbf{Sensor Data Processing}:
    \begin{itemize}
        \item \textbf{Data Fusion}: Combines data from multiple sensors for accurate perception.
        \item \textbf{Obstacle Detection}: Identifies obstacles and assesses risks.
    \end{itemize}
    \item \textbf{User Interface}:
    \begin{itemize}
        \item \textbf{Operator Control Panel}: Allows operator to initiate parking sequence and monitor status.
        \item \textbf{Warning System}: Alerts operator of any hazards or system faults.
    \end{itemize}
\end{itemize}

\subsection{System Interaction Diagram}

\textit{Note: Insert a diagram illustrating the connections and interactions between hardware and software components.}

\section{Assumptions and Constraints}

\subsection{Assumptions}

\begin{itemize}
    \item The operating environment is controlled and free from unpredictable elements (e.g., pedestrians).
    \item The vehicle will operate under normal weather conditions without extreme factors affecting sensors.
    \item Parking spots are marked according to defined dimensions and are detectable by the vehicle's sensors.
\end{itemize}

\subsection{Constraints}

\begin{itemize}
    \item \textbf{Budget}: Total hardware costs must not exceed \$750.
    \item \textbf{Scale}: The system is designed for 1/10th scale vehicles.
    \item \textbf{Units Consistency}: Measurements and specifications will consistently use metric units unless otherwise specified.
    \item \textbf{Hardware Limitations}: Sensor and actuator capabilities are limited by the chosen hardware specifications.
\end{itemize}

\section{References}

\begin{itemize}
    \item FAA-DoT-Requirements-AR-08-32.pdf (for requirements development guidance)
    \item Lecture notes from November 8th and 12th (for hazard analysis and requirements modeling)
    \item Project documentation and guidelines provided by McMaster University’s Centre for Software Certification
    \item Manufacturer specifications for sensors, actuators, and microcontrollers used in the project
\end{itemize}

\textit{This document is a draft and is intended for review by team members and project supervisors. All sections are subject to revision based on feedback and further project developments.}

\end{document}
